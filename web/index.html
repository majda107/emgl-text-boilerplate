<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>

<body>

    <!-- Create the canvas that the C++ code will draw into -->
    <canvas id="canvas" oncontextmenu="event.preventDefault()"></canvas>

    <!-- Allow the C++ to access the canvas element -->
    <script type='text/javascript'>
        var canv = document.getElementById('canvas');
        var Module = {
            canvas: canv
        };
    </script>

    <!-- Call the javascript glue code (index.js) as generated by Emscripten, located in bin folder -->
    <script src="index.js"></script>

    <!-- Bind C++ functions -->
    <script type='text/javascript'>
        canv.addEventListener('click', _toggle_background_color, false);
        canv.addEventListener('touchend', _toggle_background_color, false);

        canv.addEventListener('mousemove', (e) => {

            let rect = canv.getBoundingClientRect()

            let x = e.clientX - rect.left
            let y = e.clientY - rect.top

            drawTriangle(x, y)
        })

        function drawTriangle(x = 0.5, y = 0.2) {
            _draw_triangle(x, y)
        }

    </script>

    <!-- U may completely delete this trash description ... -->
    <div>
        <p>Click the canvas to change the background color.</p>
        <p>Move your mouse over canvas to change shape of the triangle.</p>
        <hr>
        <p>Simple Antialiased OpenGL ES 3.0 Emscripten WebAssembly example</p>
        <p>Source code: <a
                href="https://github.com/majda107/emgl-boilerplate">https://github.com/majda107/emgl-boilerplate</a></p>
        <hr>
        <p>
            Inspired by:
            <ul>
                <li><a
                        href="https://github.com/krogank9/sdl_ogl_tests/blob/master/vg/src/main.cpp">https://github.com/krogank9/sdl_ogl_tests/blob/master/vg/src/main.cpp</a>
                </li>
                <li><a
                        href="https://gist.github.com/derofim/261630cc9eea7fce431710dc2e97b094">https://gist.github.com/derofim/261630cc9eea7fce431710dc2e97b094</a>
                </li>
                <li><a
                        href="https://github.com/timhutton/opengl-canvas-wasm">https://github.com/timhutton/opengl-canvas-wasm</a>
                </li>
            </ul>
        </p>
    </div>

</body>

</html>